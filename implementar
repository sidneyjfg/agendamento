/**
 * Gere um backend completo em JavaScript (Node.js) usando Express e Prisma com base no schema fornecido de um SaaS de agendamentos.
 * 
 * ğŸ¯ Objetivo:
 * Sistema de agendamento online com rotas pÃºblicas para o cliente final e Ã¡reas privadas para o profissional e o administrador do SaaS.
 * Inclui controle de planos, Stripe, notificaÃ§Ãµes por WhatsApp, e painel administrativo com estatÃ­sticas.
 * 
 * âœ… Tec stack:
 * - Node.js com Express.js
 * - Prisma (MySQL)
 * - JWT para autenticaÃ§Ã£o (roles: ADMIN, PROFESSIONAL)
 * - bcrypt para senhas
 * - Cors + Helmet
 * - dotenv
 * - node-cron ou Agenda.js para notificaÃ§Ãµes automÃ¡ticas
 * - Stripe SDK para planos pagos
 * - IntegraÃ§Ã£o via link `wa.me` ou API WhatsApp (configurÃ¡vel)

 * ğŸ“‚ OrganizaÃ§Ã£o:
 * - Rotas separadas por role: /auth, /admin, /professional, /public
 * - Controllers, services, repositories e middlewares bem definidos
 * - Metodologias SOLID e codigo limpo
 * - CÃ³digo todo em portuguÃªs
 * 
 * ğŸ§‘â€ğŸ’¼ ADMIN:
 * - POST /auth/login (com verificaÃ§Ã£o de role === 'ADMIN')
 * - GET /admin/users â†’ lista todos os usuÃ¡rios (nome, plano, status, criadoEm)
 * - GET /admin/messages â†’ lista chamados abertos por profissionais
 * - GET /admin/statistics â†’ dashboard com:
 *    - total de usuÃ¡rios
 *    - usuÃ¡rios ativos/inativos
 *    - quantidade de agendamentos
 *    - faturamento total (baseado em subscriptions ativas)
 *    - planos mais usados
 *    - chamados abertos e respondidos
 * - GET /admin/revenue â†’ relatÃ³rio detalhado de ganhos com Stripe (mensal e anual)
 * 
 * ğŸ’‡â€â™‚ï¸ PROFESSIONAL:
 * - POST /auth/register
 * - POST /auth/login
 * - GET /professional/me
 * - PUT /professional/settings
 * - CRUD /professional/services
 * - CRUD /professional/availabilities
 * - GET /professional/appointments?status=
 * - GET /professional/customers â†’ listar clientes que jÃ¡ agendaram
 * - POST /professional/support â†’ abrir chamado para o admin

 * ğŸ“¦ Planos & Assinaturas:
 * - GET /plans
 * - POST /subscribe/:planId â†’ cria nova subscription com Stripe
 * - Middleware: cada rota relevante verifica se plano do user permite a aÃ§Ã£o
 *     - FREE: limite de agendamentos, sem WhatsApp, sem link personalizado
 *     - PREMIUM: acesso total

 * ğŸ“„ CLIENTES:
 * - GET /professional/customers â†’ clientes do profissional
 * - Cada agendamento pÃºblico faz prÃ©-cadastro do cliente com nome + telefone + e-mail (opcional)
 * - Evita duplicaÃ§Ã£o por telefone
 * - Associado ao `userId` do profissional

 * ğŸ”“ ROTAS PÃšBLICAS:
 * - GET /public/:slugPublicId/services â†’ lista serviÃ§os disponÃ­veis
 * - GET /public/:slugPublicId/availability â†’ horÃ¡rios disponÃ­veis
 * - POST /public/:slugPublicId/book â†’ cria agendamento + cadastro do cliente
 * - Retorna link do WhatsApp para o cliente confirmar/responder

 * ğŸ”” NOTIFICAÃ‡Ã•ES:
 * - node-cron: rota executada diariamente para buscar agendamentos do dia seguinte e enviar lembrete por WhatsApp
 * - GET /notifications/reminder (executado pelo cron)
 * 
 * âš ï¸ EspecificaÃ§Ãµes:
 * - Backend somente em JavaScript (sem TypeScript)
 * - CÃ³digo limpo, dividido por pastas (routes, controllers, services, prisma, middlewares)
 * - Utilizar Stripe com seguranÃ§a para assinaturas
 * - Middleware de autenticaÃ§Ã£o por token JWT + role
 * - Token expira e precisa de refresh
 * - ValidaÃ§Ã£o em todas as rotas que recebem dados
 */
